<nz-table #nzTable [nzData]="results" [nzPageSize]="10" nzTableLayout="auto" nzBordered>
  <thead>
    <tr>
      <th nzWidth="60px"></th>
      <th>Exercice</th>
      <ng-container *ngFor="let state of answerStates">
        <th>{{ state | answerStateLabel }}</th>
      </ng-container>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let item of nzTable.data">
      <tr>
        <td [nzExpand]="expandSet.has(item.id)" (nzExpandChange)="onExpandChange(item.id, $event)"></td>
        <td>{{ item.title }}</td>
        <ng-container *ngFor="let state of answerStates">
          <td nzAlign="center">{{ item.states[state] }}</td>
        </ng-container>
      </tr>
      <tr [nzExpand]="expandSet.has(item.id)">
        <div nz-row [nzGutter]="[8, 8]" nzType="flex" nzJustify="space-around" nzAlign="top">
          <ui-statistic-card
            nz-col
            matIcon="check_circle"
            ribbonColor="#8e44ad"
            description="Évaluations"
            tooltip="Nombre de réponses enregistrées (note > -1)."
            [value]="(item.attempts.avg | number : '1.0-2')!"
          />

          <ui-statistic-card
            nz-col
            matIcon="play_circle_filled"
            ribbonColor="#f1c40f"
            description="Essais par apprenant"
            tooltip="Moyenne du nombre de réponses enregistrées par apprenant."
            [value]="(item.attempts.avg | number : '1.0-2')!"
          />

          <ui-statistic-card
            nz-col
            matIcon="star"
            ribbonColor="#7f8c8d"
            description="Note moyenne"
            [value]="item.grades.avg"
            valueSuffix=" / 100"
            tooltip="Moyenne du score sur l'ensemble des réponses enregistrées."
            [shouldBePositive]="true"
          />

          <ui-statistic-card
            nz-col
            matIcon="access_time"
            ribbonColor="#f39c12"
            description="Durée moyenne"
            [value]="item.durations.avg | duration"
          />
        </div>
      </tr>
    </ng-container>
  </tbody>
</nz-table>
